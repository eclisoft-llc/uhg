CREATE TABLE IF NOT EXISTS COMPACT.DIM_PLAN (
PLAN_DIM_ID INTEGER NOT NULL CONSTRAINT PK_F_DIM_PLAN_DIM_ID PRIMARY KEY,
PLAN_CODE VARCHAR(20) NOT NULL,
PLAN_DESC VARCHAR(240) NOT NULL,
PLAN_STANDARD_FLAG VARCHAR(1) NOT NULL,
DW_INSERT_DATETIME DATETIME,
DW_UPDATE_DATETIME DATETIME,
ETL_COMPANY_DIM_ID INTEGER NOT NULL,
PLAN_GEOGRAPHY_COUNTY_DIM_ID INTEGER,
COUNTY VARCHAR(5),
COUNTY_DESC VARCHAR(25),
STATE VARCHAR(6),
STATE_DESC VARCHAR(20),
HCFA_COUNTY VARCHAR(4),
HCFA_COUNTY_DESC VARCHAR(30),
STATE_PROGRAM_CODE_1_DIM_ID INTEGER NOT NULL DEFAULT -1,
STATE_PROGRAM_CODE_2_DIM_ID INTEGER NOT NULL DEFAULT -1,
SF_INSERT_DATETIME DATETIME DEFAULT CURRENT_TIMESTAMP,
SF_UPDATE_DATETIME DATETIME DEFAULT CURRENT_TIMESTAMP,
SF_PROCESS_ID VARCHAR(36),
CONSTRAINT UK_F_DIM_PLAN_PLAN_CODE_ETL_COMPANY UNIQUE (PLAN_CODE,ETL_COMPANY_DIM_ID),
CONSTRAINT FK_DIM_PLAN_DIM_COMPANY FOREIGN KEY (ETL_COMPANY_DIM_ID) REFERENCES COMPACT.DIM_COMPANY(COMPANY_DIM_ID)
);
